\documentclass{llncs}
\usepackage[utf8]{inputenc}
\RequirePackage[brazilian, brazil, portuguese]{babel}
\usepackage[portuguese]{babelbib}

\usepackage{hyperref}
\hypersetup{colorlinks=true,linkcolor=blue,filecolor=magenta,urlcolor=cyan,}

\title{Analisador léxico}
\author{Vinícius T M Sugimoto}
\institute{CiC-UnB}

\begin{document}
\maketitle
\begin{abstract}
	\hfuzz=3pt
	Este documento apresenta a construção de um analisador léxico para um subconjunto da linguagem C feito com a ferramenta \texttt{flex}.
\keywords{Analisador sintático \and Flex \and C \and Tradutores}
\end{abstract}

\section{Motivação}
\label{sec:motivacao}

Este projeto foi desenvolvido com o objetivo de construir uma linguagem derivada da linguagem \textbf{C} para trabalhar com conjutos. Assim, os tipos primitivos \texttt{set} e \texttt{elem} foram adicionados à linguagem.

\section{Análise Léxica}
\label{sec:analise_lexica}
A análise léxica é a primeira etapa para a construção de um tradutor para a linguagem proposta. Com a análise léxica, um programa escrito na linguagem proposta é convertido em uma sequência de \textit{tokens} que podem ser usados nas próximas etapas da construção do traduto, as análises sintática e semântica. Esta análise foi feita usando a ferramenta \texttt{flex}, que define um conjunto de ``regras'' que casam expressões regulares com o programa de entrada e executa comandos específicos para cada regra.

O \texttt{flex} foir utilizado para gerar \textit{tokens} de maneira apropriada para cada regra e tentar identificar erros no código na etapa de análise léxica.

\section{Testes}
\label{sec:testes}

Junto aos arquivos deste projeto, que podem ser obtidos seguindo os passos da seção \ref{sec:reproducao} estão quatro arquivos nomeados \texttt{subset\_sum\textbf{X}.conj}, em que {\bf\tt X} $= 1,2,3,4$ que server como arquivos de entrada teste para o analisador léxico gerado. Os arquivos com final $1,2$ são arquivos corretos, já os arquivos com final $3,4$ representam arquivos com erros.

\section{Reprodução}
\label{sec:reproducao}

\subsection{Dependências}

Este projeto tem as seguintes dependências:

\begin{itemize}
	\item \texttt{\bf gcc} versão 10.2.0
	\item \texttt{\bf flex} versão 2.6.4
\end{itemize}

\subsection{Execução}

Os arquivos deste projeto podem ser encontrados no endereço \url{https://github.com/vinicius-toshiyuki/conjunto.git}. Os arquivos podem ser baixados em formato \texttt{.zip} pelo site ou o repositório pode ser clonado com o programa \texttt{git} no terminal. A seguir serão mostrados os passos a serem seguidos para executar o analisador léxico gerado em um terminal Linux.

\begin{verbatim}
# Clona o repositório
git clone \
	https://github.com/vinicius-toshiyuki/conjunto.git
# Muda para o diretório criado
cd conjunto
# Gera o código C do analisador léxico
flex sintaxe.l
# Compila o analisador léxico
gcc lex.yy.c -lfl
# Para executar use o comando cat
cat subset_sum.conj | ./a.out
\end{verbatim}

\nocite{*}
\bibliography{bibliografia}
\bibliographystyle{alpha}
\newpage
\section{Anexo}
\newcommand\pat[1]{$\mathbf{#1}$}
\newcommand\tok[1]{\langle #1 \rangle}

A sintaxe da linguagem é composta de expressões e comandos. A seguir são apresentados os padrões reconhecidos pela gramática desta linguagem. Nos padrões a seguir os caracteres \pat{[\;]} são usados para impôr uma precedência maior na expressão regular interna, \pat{[[\;]]} são usados para indicar grupos ou intervalos de caracteres em que qualquer um dos caracteres pertencentes pode ser casado, $\star$ é usado como a ``\textit{Kleene star}'', $+$ é usado para indicar que a expressão regular precedente é obrigatória e pode ser repetida, $?$ é usado para indicar que a expressão regular precedida é opcional, \pat{\tok{\:}} são usados para indicar um grupo de padrões. Vale ressaltar que espaços em branco não estão inclusos nos padrões descritos a seguir, para fins de simplicidade, mas considere-os válidos onde seriam válidos na linguagem \texttt{C}.

\subsection{Padrões auxiliares}
Os padrões a seguir são utilizados nos outros grupos de padrões e cada um tem sua própria denominação.

\begin{enumerate}
	\item \pat{-^?[[0-9]]^+}
		
		Um número inteiro. É denominado pelo grupo \pat{\tok{INT}}.
	\item
		\pat{-^?[[0-9]]^+.[[0-9]]^{\star}f^?} ou
		\pat{-^?[[0-9]]^{\star}.[[0-9]]^+f^?} ou
		\pat{\tok{INTEGER}f}

		Um número real. É denominado pelo grupo \pat{\tok{FLOAT}}.
	\item \pat{\tok{INT}} ou \pat{\tok{FLOAT}} ou \pat{EMPTY}

		Uma constante. É denominada pelo grupo \pat{\tok{CONST}}.
	\item \pat{[[a-zA-Z\_]][[a-zA-Z0-9\_]]^{\star}}

		Um identificador. É denominado pelo grupo \pat{\tok{ID}}.
	\item \pat{int} ou \pat{float} ou \pat{set} ou \pat{elem}

		Um tipo de dados. É denomidado pelo grupo \pat{\tok{TYPE}}.
	\item \pat{*} ou \pat{/} ou \pat{\%} ou \pat{+} ou \pat{-}

		Um operador aritimético. É denomidado pelo grupo \pat{\tok{OPARIT}}.
	\item \pat{<} ou \pat{>} ou \pat{<=} ou \pat{>=} ou \pat{==} ou \pat{!=}

		Um operador relacional. É denominado pelo grupo \pat{\tok{OPREL}}.
	\item \pat{\&\&} ou \pat{||} ou \pat{\&} ou \pat{|}

		Um operador booleano. É denominado pelo grupo \pat{\tok{OPBOOL}}.
	\item \pat{\tok{OPARIT}=} ou \pat{\&=} ou \pat{|=}

		Um operador composto. É denominado pelo grupo \pat{\tok{OPCOMP}}.
	\item \pat{\tok{OPARIT}} ou \pat{\tok{OPCOMP}} ou \pat{\tok{OPREL}} ou \pat{\tok{OPBOOL}} ou \pat{=} ou \pat{in}

		Um operador binário. É denominado pelo grupo \pat{\tok{OPBIN}}.
	\item \pat{!} ou \pat{-}

		Um operador unário. É denominado pelo grupo \pat{\tok{OPUNI}}.
	\item \pat{++} ou \pat{- -}

		Um operador unário especial. É denominado pelo grupo \pat{\tok{OPSPE}}.
\end{enumerate}

\subsection{Expressões}
Os padrões a seguir fazem parte do grupo \pat{\tok{EXP}}.

\begin{enumerate}
	\item \pat{\tok{CONST}}

		Uma expressão constante. Seu valor é a própria constante.
	\item \pat{\tok{ID}}

		Uma expressão identificador. Seu valor é o valor associado ao identificador.
	\item \pat{\tok{EXP}\tok{OPBIN}\tok{EXP}}

		Uma expressão com operação binária. Seu valor é o valor da operação sobre os valores das duas expressões internas.
	\item \pat{\tok{OPUNI}\tok{EXP}} ou \pat{\tok{OPSPE}\tok{EXP}}

		Uma expressão com operação unária. Seu valor é o valor da operação sobre o valor da expressão interna.
	\item \pat{\tok{EXP}\tok{OPSPE}}

		Uma expressão com operação unária especial. Seu valor é o valor da expressão interna.
	\item \pat{\tok{ID}([\tok{EXP}[,\tok{EXP}]^{\star}]^?)}

		Uma expressão chamada de função. Seu valor é o valor de retorno da função computada sobre seus argumentos.
\end{enumerate}

\subsection{Comandos}
Os padrões a seguir fazem parte do grupo \pat{\tok{CMD}}.
\begin{enumerate}
	\item \pat{\{\tok{CMD}^{\star}\}}

		Um bloco é um comando. Um bloco é seguido de uma sequência opcional de comandos.
	\item \pat{\tok{EXP}^?;}

		Um comando vazio. Um comando vazio pode ser precedido de uma expressão.
	\item \pat{if(\tok{EXP})\tok{CMD}}

		Um comando \texttt{if}. Um comando \texttt{if} é seguido de uma expressão em parênteses e de um comando.
	\item \pat{else\tok{CMD}}

		Um comando \texttt{else}. Um comando \texttt{else} é seguido de um comando. Na etapa de análise léxica não há checagem se um comando \texttt{else} é precedido de um \texttt{if}.
	\item \pat{while(\tok{EXP})\tok{CMD}}

		Um comando \texttt{while}. Um comando \texttt{while} é seguido de uma expressão em parênteses e de um comando.
	\item \pat{forall(\tok{EXP})\tok{CMD}}

		Um comando \texttt{forall}. Um comando \texttt{forall} é seguido de uma expressão em parênteses e de um comando. Na etapa de análise léxica não há checagem se a expressão é uma expressão ``\texttt{in}''.
	\item \pat{for(\tok{EXP}^?;\tok{EXP}^?;\tok{EXP}^?)\tok{CMD}}

		Um comando \texttt{for}. Um comando \texttt{for} é seguido de três expressões opcionais separadas por ponto-e-vírgula em parênteses e de um comando.
	\item \pat{\tok{TYPE}\tok{ID}[,\tok{ID}]^{\star};}

		Uma comando de declaração de variável. Uma declaração é composta de um tipo seguido de um identificador seguido de uma lista de ``vírgula e identificador'' opcional e de um ponto-e-vírgula.
	\item \pat{\tok{TYPE}\tok{ID}([\tok{TYPE}\tok{ID}[,\tok{TYPE}\tok{ID}]^{\star}]^?)\{\tok{CMD}\}}

		Uma comando de declaração de função. Uma declaração é composta de um tipo seguido de um identificador seguido de uma lista opcional de parâmetros no formato ``tipo e identificador'' em parênteses e de um comando bloco.
	\item \pat{return\tok{EXP}}

		Um comando de retorno. É composto da palavra reservada \texttt{return} seguido de uma expressão e um ponto-e-vírgula.
\end{enumerate}
\end{document}
